<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <style>
    body {
      margin: 0 100;
      background: whitesmoke;
    }
  </style>

  <title>Weight Table</title>
</head>

<body>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <h1>Weight Chart</h1>
  <div id="container"> </div>
  <script>

    var xField = 'date';
    var yField = 'weight';

    var selectorOptions = {
      buttons: [{
        step: 'month',
        stepmode: 'backward',
        count: 1,
        label: '1m'
      }, {
        step: 'month',
        stepmode: 'backward',
        count: 6,
        label: '6m'
      }, {
        step: 'year',
        stepmode: 'todate',
        count: 1,
        label: 'YTD'
      }, {
        step: 'year',
        stepmode: 'backward',
        count: 1,
        label: '1y'
      }, {
        step: 'all',
      }],
    };

    Plotly.d3.csv("result.csv", function (err, rawData) {
      if (err) throw err;

      var data = prepData(rawData);
      var layout = {
        title: 'Weight',
        xaxis: {
          rangeselector: selectorOptions,
        },
        yaxis: {
          autorange: true,
          showgrid: true
        }
      };

      Plotly.plot('container', data, layout);
    });

    function prepData(rawData) {
      var x = [];
      var y = [];

      rawData.forEach(function (datum, i) {

        x.push(new Date(datum[xField]));
        y.push(datum[yField]);
      });

      return [{
        mode: 'lines',
        x: x,
        y: y,
        connectgaps: false
      }];
    }
  </script>


</body>

</html>
